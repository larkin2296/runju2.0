{"remainingRequest":"/Library/WebServer/Documents/runju2.0/node_modules/babel-loader/lib/index.js!/Library/WebServer/Documents/runju2.0/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Library/WebServer/Documents/runju2.0/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/runju2.0/src/views/maintenance/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/runju2.0/src/views/maintenance/index.vue","mtime":1543907580924},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\";\nimport \"vant/es/popup/style\";\nimport _Popup from \"vant/es/popup\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"vant/es/button/style\";\nimport _Button from \"vant/es/button\";\nimport \"vant/es/uploader/style\";\nimport _Uploader from \"vant/es/uploader\";\nimport { send_maintencance_data } from '@/api/upload.js';\nexport default {\n  data() {\n    return {\n      img_list: [],\n      portrait: require('../../img/add_pic.png'),\n      type: this.$route.params.id,\n      title: '',\n      msg: '',\n      content: ''\n    };\n  },\n\n  created() {\n    this.fetchData();\n  },\n\n  components: {\n    [_Uploader.name]: _Uploader,\n    [_Button.name]: _Button,\n    [_NavBar.name]: _NavBar,\n    [_Popup.name]: _Popup,\n    [_Icon.name]: _Icon\n  },\n  methods: {\n    fetchData() {\n      if (this.$route.params.id == 0) {\n        this.title = '房屋维修';\n      } else {\n        this.title = '意见反馈';\n      }\n    },\n\n    onClickLeft() {\n      this.$router.push({\n        path: '/user'\n      });\n    },\n\n    onRead(file) {\n      if (this.img_list.length > 3) {\n        this.msg = '最多上传三张图片';\n        this.show = true;\n        setTimeout(function () {\n          that.show = false;\n        }, 1500);\n      }\n\n      var param = Object();\n      param.url = file.content;\n      this.img_list.push(param);\n    },\n\n    send_maintenance() {\n      var param = Object();\n\n      if (this.content == '') {\n        this.msg = '请输入反馈问题';\n        this.show = true;\n        setTimeout(function () {\n          that.show = false;\n        }, 1500);\n      } else {\n        param.content = this.content;\n        param.img_list = this.img_list;\n        param.type = this.type;\n        send_maintencance_data(param).then(res => {\n          this.msg = '最多上传三张图片';\n          this.show = true;\n          setTimeout(function () {\n            that.show = false;\n          }, 1500);\n          this.img_list = [];\n          this.content = '';\n        });\n      }\n    }\n\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;AAwBA,SAAA,sBAAA,QAAA,iBAAA;AACA,eAAA;AACA,SAAA;AACA,WAAA;AACA,gBAAA,EADA;AAEA,gBAAA,QAAA,uBAAA,CAFA;AAGA,YAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAHA;AAIA,aAAA,EAJA;AAKA,WAAA,EALA;AAMA,eAAA;AANA,KAAA;AAQA,GAVA;;AAWA,YAAA;AACA,SAAA,SAAA;AACA,GAbA;;AAcA,cAAA;AACA,KAAA,UAAA,IAAA,YADA;AAEA,KAAA,QAAA,IAAA,UAFA;AAGA,KAAA,QAAA,IAAA,UAHA;AAIA,KAAA,OAAA,IAAA,SAJA;AAKA,KAAA,MAAA,IAAA;AALA,GAdA;AAqBA,WAAA;AACA,gBAAA;AACA,UAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,IAAA,CAAA,EAAA;AACA,aAAA,KAAA,GAAA,MAAA;AACA,OAFA,MAEA;AACA,aAAA,KAAA,GAAA,MAAA;AACA;AACA,KAPA;;AAQA,kBAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,cAAA;AAAA,OAAA;AACA,KAVA;;AAWA,WAAA,IAAA,EAAA;AACA,UAAA,KAAA,QAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,GAAA,GAAA,UAAA;AACA,aAAA,IAAA,GAAA,IAAA;AACA,mBAAA,YAAA;AACA,eAAA,IAAA,GAAA,KAAA;AACA,SAFA,EAEA,IAFA;AAGA;;AACA,UAAA,QAAA,QAAA;AACA,YAAA,GAAA,GAAA,KAAA,OAAA;AACA,WAAA,QAAA,CAAA,IAAA,CAAA,KAAA;AACA,KAtBA;;AAuBA,uBAAA;AACA,UAAA,QAAA,QAAA;;AACA,UAAA,KAAA,OAAA,IAAA,EAAA,EAAA;AACA,aAAA,GAAA,GAAA,SAAA;AACA,aAAA,IAAA,GAAA,IAAA;AACA,mBAAA,YAAA;AACA,eAAA,IAAA,GAAA,KAAA;AACA,SAFA,EAEA,IAFA;AAGA,OANA,MAMA;AACA,cAAA,OAAA,GAAA,KAAA,OAAA;AACA,cAAA,QAAA,GAAA,KAAA,QAAA;AACA,cAAA,IAAA,GAAA,KAAA,IAAA;AACA,+BAAA,KAAA,EAAA,IAAA,CAAA,OAAA;AACA,eAAA,GAAA,GAAA,UAAA;AACA,eAAA,IAAA,GAAA,IAAA;AACA,qBAAA,YAAA;AACA,iBAAA,IAAA,GAAA,KAAA;AACA,WAFA,EAEA,IAFA;AAGA,eAAA,QAAA,GAAA,EAAA;AACA,eAAA,OAAA,GAAA,EAAA;AACA,SARA;AASA;AACA;;AA7CA;AArBA,CAAA","sourcesContent":["<template>\n    <div id='page'>\n        <van-nav-bar\n        :title=\"title\"\n        left-text=\"返回\"\n        right-text=\"\"\n        left-arrow\n        @click-left=\"onClickLeft\"\n        />\n        <van-popup class='msg' v-model=\"show\" :overlay=\"false\"><van-icon name='question'/>{{msg}}</van-popup>\n         <div class='area'>\n            <textarea class='text' v-model='content' placeholder=\"请填写你遇到的问题给我们\"></textarea>\n            <div class='upload'>\n                <img v-for=\"(item,index) in img_list\" :key=\"index\" :src='item.url'/>\n                <van-uploader :after-read=\"onRead\" accept=\"image/*\" multiple>\n                    <img class=\"head-img\" :src=\"portrait\" ref=\"goodsImg\"/>\n                </van-uploader>\n            </div>\n        </div>\n        <van-button class='sure' @click='send_maintenance'>确认</van-button>\n    </div>\n</template>\n<script>\nimport { Uploader,Button,NavBar,Popup,Icon } from 'vant'\nimport { send_maintencance_data } from '@/api/upload.js'\nexport default {\n    data(){\n        return{\n            img_list: [],\n            portrait: require('../../img/add_pic.png'),\n            type: this.$route.params.id,\n            title: '',\n            msg: '',\n            content: ''\n        }\n    },\n    created(){\n        this.fetchData()\n    },\n    components:{\n        [Uploader.name]:Uploader,\n        [Button.name]:Button,\n        [NavBar.name]:NavBar,\n        [Popup.name]:Popup,\n        [Icon.name]:Icon\n    },\n    methods:{\n        fetchData(){\n            if(this.$route.params.id == 0){\n                this.title = '房屋维修'\n            }else{\n                this.title = '意见反馈'\n            }\n        },\n        onClickLeft(){\n            this.$router.push({path: '/user'})\n        },\n        onRead(file){\n            if(this.img_list.length > 3){\n                this.msg = '最多上传三张图片'\n                this.show = true\n                setTimeout(function () {\n                    that.show = false\n                }, 1500)\n            }\n            var param = Object()\n            param.url = file.content\n            this.img_list.push(param)\n        },\n        send_maintenance(){\n            var param = Object()\n            if(this.content == ''){\n                this.msg = '请输入反馈问题'\n                this.show = true\n                setTimeout(function () {\n                    that.show = false\n                }, 1500)\n            }else{\n                param.content = this.content\n                param.img_list = this.img_list\n                param.type = this.type\n                send_maintencance_data(param).then(res=>{\n                    this.msg = '最多上传三张图片'\n                    this.show = true\n                    setTimeout(function () {\n                        that.show = false\n                    }, 1500)\n                    this.img_list = []\n                    this.content = ''                    \n                })\n            }\n        }\n    }\n}\n</script>\n\n<style scoped>\n#page{\n    width:100%;\n    height:100%;\n    background-color: rgb(242,242,242);\n}\n.area{\n    width:100%;\n    height:300px;\n    background-color: #ffffff;\n}\n.text{\n    width:90%;\n    margin-left:5%;\n    height:200px;\n    font-size:14px;\n}\n.upload{\n    width:90%;\n    height:100px;\n    margin:0 auto;\n}\n.sure{\n    width:90%;\n    height:50px;\n    margin:10px auto;\n    display: block;\n    color:#ffffff;\n    background-color: #EA8608;\n    font-family: PingFangLight;\n    font-size:22px;\n    letter-spacing: 5px;\n}\n.upload img{\n    width:80px;\n    height:80px;\n    margin-right:10px;\n}\n.msg{\n    width:200px;\n    height:60px;\n    text-align:center;\n    line-height:60px;\n    border-radius: 5px;\n    font-family: PingFangBold;\n    color:#ffffff;\n    font-size:15px;\n    background-color: #000000;\n    box-shadow: 3px 4px 10px 2px rgba(119,118,118,0.33);\n}\n.van-icon{\n    vertical-align: middle;\n    padding-right:5px;\n}\n</style>\n"],"sourceRoot":"src/views/maintenance"}]}