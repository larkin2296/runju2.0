{"remainingRequest":"/Library/WebServer/Documents/runju2.0/node_modules/babel-loader/lib/index.js!/Library/WebServer/Documents/runju2.0/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Library/WebServer/Documents/runju2.0/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/runju2.0/src/views/detailpage/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/runju2.0/src/views/detailpage/index.vue","mtime":1553412569212},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"vant/es/image-preview/style\";\nimport _ImagePreview from \"vant/es/image-preview\";\nimport \"vant/es/datetime-picker/style\";\nimport _DatetimePicker from \"vant/es/datetime-picker\";\nimport \"vant/es/popup/style\";\nimport _Popup from \"vant/es/popup\";\nimport \"vant/es/button/style\";\nimport _Button from \"vant/es/button\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\nimport \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\";\nimport \"vant/es/field/style\";\nimport _Field from \"vant/es/field\";\nimport \"vant/es/tabbar-item/style\";\nimport _TabbarItem from \"vant/es/tabbar-item\";\nimport \"vant/es/col/style\";\nimport _Col from \"vant/es/col\";\nimport \"vant/es/row/style\";\nimport _Row from \"vant/es/row\";\nimport \"vant/es/swipe-item/style\";\nimport _SwipeItem from \"vant/es/swipe-item\";\nimport \"vant/es/swipe/style\";\nimport _Swipe from \"vant/es/swipe\";\nimport Bottom from '../../components/Bottom.vue';\nimport Child from '../../components/Keyword.vue';\nimport Meau from '../../components/Meau.vue';\nimport { get_house_detail, set_house_like, set_appoint, save_history } from '@/api/house.js';\nimport { TMap } from '../../TMap.js';\nimport { formatDate } from '../../utils/date.js';\nimport store from '@/store';\nexport default {\n  data() {\n    return {\n      id: this.$route.params.id,\n      current: 0,\n      images: [],\n      current: 0,\n      pic_length: 0,\n      result: [],\n      markers: [],\n      icon_dress: [require('../../img/zhuozi.png')],\n      like: 0,\n      show: false,\n      msg: '',\n      appoint_area: false,\n      name: '',\n      phone: '',\n      appoint_time: '',\n      time_show: false,\n      currentDate: new Date(),\n      minDate: new Date(),\n      traffic: 1,\n      traffic_word: '展开',\n      type_word: this.$route.params.type == 1 ? '/月' : '万元'\n    };\n  },\n\n  components: {\n    Bottom,\n    Child,\n    Meau,\n    [_Swipe.name]: _Swipe,\n    [_SwipeItem.name]: _SwipeItem,\n    [_Row.name]: _Row,\n    [_Col.name]: _Col,\n    [_TabbarItem.name]: _TabbarItem,\n    [_Field.name]: _Field,\n    [_Icon.name]: _Icon,\n    [_NavBar.name]: _NavBar,\n    [_Button.name]: _Button,\n    [_Popup.name]: _Popup,\n    [_DatetimePicker.name]: _DatetimePicker\n  },\n\n  created() {\n    this.fetchData();\n  },\n\n  mounted() {},\n\n  methods: {\n    fetchData() {\n      TMap('TEFBZ-LI5KD-AEE4S-HLTQ3-74SJ7-UJB6G').then(qq => {\n        var map = new qq.maps.Map(document.getElementById(\"container\"), {\n          // 地图的中心地理坐标。\n          center: new qq.maps.LatLng(39.916527, 116.397128),\n          zoom: 8,\n          disableDefaultUI: true,\n          zoomControl: true\n        });\n        var that = this; //调用Poi检索类\n\n        var searchService = new qq.maps.SearchService({\n          //检索成功的回调函数\n          complete: function (results) {\n            //设置回调函数参数\n            var pois = results.detail.pois;\n            var infoWin = new qq.maps.InfoWindow({\n              map: map\n            });\n            var latlngBounds = new qq.maps.LatLngBounds();\n\n            for (var i = 0, l = pois.length; i < l; i++) {\n              var poi = pois[i]; //扩展边界范围，用来包含搜索到的Poi点\n\n              latlngBounds.extend(poi.latLng);\n\n              (function (n) {\n                var marker = new qq.maps.Marker({\n                  map: map\n                });\n                marker.setPosition(pois[n].latLng);\n                marker.setTitle(i + 1);\n                that.markers.push(marker);\n              })(i);\n            } //调整地图视野\n\n\n            map.fitBounds(latlngBounds);\n          },\n          //若服务请求失败，则运行以下函数\n          error: function () {\n            alert(\"出错了。\");\n          }\n        });\n        var param = Object();\n        param.id = this.$route.params.id;\n\n        if (store.getters.token != undefined && store.getters.id != '') {\n          param.user_id = store.getters.id;\n          save_history(param).then(res => {});\n        }\n\n        get_house_detail(param).then(res => {\n          this.result = res;\n          this.images = res.pic;\n          this.like = res.like;\n          this.pic_length = res.pic.pic_length;\n          searchService.setPageIndex(1); //设置每页的结果数\n\n          searchService.setPageCapacity(1);\n          searchService.setLocation('上海');\n          searchService.search(res.district + res.address);\n        });\n        document.body.scrollTop = 0;\n        document.documentElement.scrollTop = 0;\n      });\n    },\n\n    onClickLeft() {\n      if (this.$route.params.type == 2) {\n        this.$router.push({\n          name: 'secondary',\n          params: {\n            id: 2\n          }\n        });\n      } else {\n        this.$router.push({\n          name: 'list',\n          params: {\n            id: 1\n          }\n        });\n      }\n    },\n\n    onChange(index) {\n      this.current = index;\n    },\n\n    show_pic(index) {\n      _ImagePreview({\n        images: this.images,\n        startPosition: index,\n\n        onClose() {// do something\n        }\n\n      });\n    },\n\n    set_like() {\n      var that = this;\n      var param = Object();\n      param.id = this.$route.params.id;\n\n      if (store.getters.token != undefined && store.getters.id != '') {\n        param.user_id = store.getters.id;\n        set_house_like(param).then(res => {\n          if (res.code == '2000') {\n            this.like = res.data;\n          }\n        });\n      } else {\n        this.msg = '请先登录';\n        this.show = true;\n        setTimeout(function () {\n          that.show = false;\n        }, 1500);\n      }\n    },\n\n    add_appoint() {\n      if (store.getters.token != undefined && store.getters.id != '') {\n        this.appoint_area = true;\n      } else {\n        this.msg = '请先登录';\n        this.show = true;\n        setTimeout(function () {\n          that.show = false;\n        }, 1500);\n      }\n    },\n\n    beforeClose(action, done) {\n      var that = this;\n\n      if (action === 'confirm') {\n        if (this.name == '' || this.phone == '' || this.appoint_time == '') {\n          this.msg = '填写完整';\n          this.show = true;\n          setTimeout(function () {\n            that.show = false;\n            done();\n            that.appoint_area = true;\n          }, 1500);\n        } else {\n          var param = Object();\n          param.user_id = store.getters.id, param.house_id = this.$route.params.id;\n          param.name = this.name;\n          param.phone = this.phone;\n          param.appoint_time = this.appoint_time;\n          set_appoint(param).then(res => {\n            this.msg = res.data;\n            this.show = true;\n            setTimeout(function () {\n              that.show = false;\n              done();\n            }, 1500);\n          });\n        }\n      } else {\n        done();\n      }\n    },\n\n    call_phone() {},\n\n    show_time() {\n      this.time_show = true;\n    },\n\n    onConfirm(value) {\n      this.appoint_time = formatDate(value, 'yyyy-MM-dd');\n      this.time_show = false;\n    },\n\n    onCancel() {\n      this.time_show = false;\n    },\n\n    show_all() {\n      if (this.traffic == 0) {\n        this.traffic = 1;\n        this.traffic_word = '展开';\n      } else {\n        this.traffic = 0;\n        this.traffic_word = '关闭';\n      }\n    }\n\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class='page'>\n        <!-- 轮播图 -->\n        <van-nav-bar\n        :title=\"result.address\"\n        left-text=\"返回\"\n        right-text=\"\"\n        left-arrow\n        @click-left=\"onClickLeft\"\n        />\n        <van-swipe class='swipe' @change=\"onChange\">\n        <van-swipe-item v-for=\"(image, index) in images\" :key=\"index\">\n            <img class='lazy_img' v-lazy=\"image\" @click='show_pic(index)'/>\n        </van-swipe-item>\n        </van-swipe>\n        <!-- 房屋信息 -->\n        <div class='house_area'>\n            <div class='house_title'>\n                {{result.title}}\n            </div>\n            <van-row class='house_msg' type=\"flex\" justify=\"space-between\">\n                <van-col span=\"7\"><div class='msg_top'>房租</div><div class='msg_content'>{{result.price}}{{type_word}}</div></van-col>\n                <van-col span=\"10\" class='msg_middle'><div class='msg_top'>户型</div><div class='msg_content'>{{result.house_type}}</div></van-col>\n                <van-col span=\"7\"><div class='msg_top'>面积</div><div class='msg_content'>{{result.acreage}}</div></van-col>\n            </van-row>\n            <div class='house_announce'>\n                <div class='key_word'>\n                    <child v-for=\"(itemchild,index) in result.key_word\" :key=\"index\" :message=\"itemchild\"></child>\n                </div>\n                <div class='house_announce_detail '>\n                    <van-row class='list' type=\"flex\" justify=\"space-between\">\n                    <van-col span=\"12\"><van-field :value=\"result.house_type\" label=\"户型:\" disabled /></van-col>\n                    <van-col span=\"12\"><van-field :value=\"result.acreage\" label=\"面积:\" disabled /></van-col>\n                    </van-row>\n                    <van-row class='list' type=\"flex\" justify=\"space-between\">\n                        <van-col span=\"12\"><van-field :value=\"result.orientation\" label=\"朝向:\" disabled /></van-col>\n                        <van-col span=\"12\"><van-field :value=\"result.house_floor\" label=\"楼层:\" disabled /></van-col>\n                    </van-row>\n                    <van-row class='list' type=\"flex\" justify=\"space-between\">\n                        <van-col span=\"12\"><van-field :value=\"result.under_station\" label=\"地铁:\" disabled /></van-col>\n                        <van-col span=\"12\"><van-field :value=\"result.house_status\" label=\"状态:\" disabled /></van-col>\n                    </van-row>\n                    <van-row class='list' type=\"flex\" justify=\"space-between\">\n                        <van-col span=\"12\"><van-field :value=\"result.pay_type\" label=\"支付:\" disabled /></van-col>\n                        <van-col span=\"12\"><van-field :value=\"result.address\" label=\"小区:\" disabled /></van-col>\n                    </van-row>\n                </div>\n            </div>\n        </div>\n        <!-- 地图显示位置 -->\n        <div class='title'>地理位置</div>\n        <div id='container'>\n\n        </div>\n        <!-- 房屋简介 -->\n        <div class='title'>房屋简介</div>\n        <div class='house_more'>\n            <div class='facilities'>\n                <van-row class='list' type=\"flex\" justify=\"space-between\">\n                    <van-col span=\"4\"><van-tabbar-item><span>桌子</span><img slot=\"icon\" slot-scope=\"props\" src=\"../../img/zhuozi.png\"></van-tabbar-item></van-col>\n                    <van-col span=\"4\"><van-tabbar-item><span>空调</span><img slot=\"icon\" slot-scope=\"props\" src=\"../../img/kongtiao.png\"></van-tabbar-item></van-col>\n                    <van-col span=\"4\"><van-tabbar-item><span>浴缸</span><img slot=\"icon\" slot-scope=\"props\" src=\"../../img/yugang.png\"></van-tabbar-item></van-col>\n                    <van-col span=\"4\"><van-tabbar-item><span>椅子</span><img slot=\"icon\" slot-scope=\"props\" src=\"../../img/yizi.png\"></van-tabbar-item></van-col>\n                    <van-col span=\"4\"><van-tabbar-item><span>衣柜</span><img slot=\"icon\" slot-scope=\"props\" src=\"../../img/yigui.png\"></van-tabbar-item></van-col>\n                </van-row>\n                <van-row class='list' type=\"flex\" justify=\"space-between\">\n                    <van-col span=\"4\"><van-tabbar-item><span>洗衣机</span><img slot=\"icon\" slot-scope=\"props\" src=\"../../img/xiyiji.png\"></van-tabbar-item></van-col>\n                    <van-col span=\"4\"><van-tabbar-item><span>沙发</span><img slot=\"icon\" slot-scope=\"props\" src=\"../../img/shafa.png\"></van-tabbar-item></van-col>\n                    <van-col span=\"4\"><van-tabbar-item><span>电视</span><img slot=\"icon\" slot-scope=\"props\" src=\"../../img/dianshi.png\"></van-tabbar-item></van-col>\n                    <van-col span=\"4\"><van-tabbar-item><span>床</span><img slot=\"icon\" slot-scope=\"props\" src=\"../../img/chuang.png\"></van-tabbar-item></van-col>\n                    <van-col span=\"4\"><van-tabbar-item><span>冰箱</span><img slot=\"icon\" slot-scope=\"props\" src=\"../../img/bingxiang.png\"></van-tabbar-item></van-col>\n                </van-row>                 \n            </div>\n            <div :class=\"traffic == 1?'traffic':'traffic1'\">\n                <div class='traffic_list'>{{result.remark}}</div>\n                <div v-if=\"result.translate_nearby != ''\" class='traffic_list'>交通：{{result.translate_nearby}}</div>\n                <div v-if=\"result.shopping_nearby != ''\" class='traffic_list'>商场：{{result.shopping_nearby}}</div>\n                <div v-if=\"result.hospital_nearby != ''\" class='traffic_list'>医院：{{result.hospital_nearby}}</div>\n                <div v-if=\"result.rest_nearby != ''\" class='traffic_list'>休闲：{{result.rest_nearby}}</div>\n            </div>\n                <div @click='show_all' style='color:#00B2EE;font-size:14px;font-family:PingFangLight'>{{traffic_word}}</div>\n        </div>\n        <!-- 房东联系方式 -->\n        <div class='landlord'>\n\n        </div>\n        <div class='bottom'><div class='bottom_left' @click='set_like'><van-icon v-if=\"like == 0\" name='like-o' size='34px'/><van-icon v-if=\"like == 1\" style='color:red;' name='like' size='34px'/></div><van-button type='danger' @click='add_appoint'>添加行程</van-button><van-button type='warning' @click='call_phone'>立即联系</van-button></div>\n        <van-popup class='msg' v-model=\"show\" :overlay=\"false\"><van-icon name='question'/>{{msg}}</van-popup>\n        <van-dialog\n            v-model=\"appoint_area\"\n            show-cancel-button\n            :overlay=\"true\"\n            :before-close=\"beforeClose\"\n            >\n            <van-field\n                v-model=\"name\"\n                label=\"联系人\"\n                placeholder=\"请输入联系人\"\n            />\n            <van-field\n                v-model=\"phone\"\n                label=\"手机号\"\n                placeholder=\"手机号\"\n            />\n            <van-field\n                v-model=\"appoint_time\"\n                label=\"预约日期\"\n                placeholder=\"选择日期\"\n                :readonly='true'\n                @click='show_time'\n            />\n            <van-datetime-picker\n            v-show=\"time_show\"\n            v-model=\"currentDate\"\n            type=\"date\"\n            :min-date=\"minDate\"\n            @cancel=\"onCancel\"\n            @confirm=\"onConfirm\"\n            />\n        </van-dialog>\n    <bottom></bottom>        \n    </div>\n</template>\n\n<script>\nimport { Swipe,SwipeItem,ImagePreview,Row,Col,TabbarItem,Field,Icon,NavBar,Button,Popup,DatetimePicker } from 'vant';\nimport Bottom from '../../components/Bottom.vue';\nimport Child from '../../components/Keyword.vue';\nimport Meau from '../../components/Meau.vue'\nimport { get_house_detail,set_house_like,set_appoint,save_history } from '@/api/house.js';\nimport { TMap } from '../../TMap.js';\nimport { formatDate } from '../../utils/date.js';\nimport store from '@/store'\nexport default {\n    data(){\n        return{\n            id: this.$route.params.id,\n            current: 0,\n            images:[],\n            current: 0,\n            pic_length: 0,\n            result:[],\n            markers:[],\n            icon_dress:[\n                require('../../img/zhuozi.png')\n            ],\n            like: 0,\n            show:false,\n            msg: '',\n            appoint_area: false,\n            name: '',\n            phone: '',\n            appoint_time: '',\n            time_show:false,\n            currentDate: new Date(),\n            minDate:new Date(),\n            traffic: 1,\n            traffic_word: '展开',\n            type_word: this.$route.params.type == 1?'/月':'万元'\n        }\n    },\n    components: {\n        Bottom,\n        Child,\n        Meau,\n        [Swipe.name]:Swipe,\n        [SwipeItem.name]:SwipeItem,\n        [Row.name]:Row,\n        [Col.name]:Col,\n        [TabbarItem.name]:TabbarItem,\n        [Field.name]:Field,\n        [Icon.name]:Icon,\n        [NavBar.name]:NavBar,\n        [Button.name]:Button,\n        [Popup.name]:Popup,\n        [DatetimePicker.name]:DatetimePicker\n    },\n    created(){\n        this.fetchData()\n    },\n    mounted() {\n        \n    },\n    methods:{\n        fetchData(){\n            TMap('TEFBZ-LI5KD-AEE4S-HLTQ3-74SJ7-UJB6G').then(qq => {\n            var map = new qq.maps.Map(document.getElementById(\"container\"), {\n                // 地图的中心地理坐标。\n                center: new qq.maps.LatLng(39.916527, 116.397128),\n                 zoom: 8,\n                 disableDefaultUI: true,\n                 zoomControl: true, \n            });\n            var that = this\n            //调用Poi检索类\n            var searchService = new qq.maps.SearchService({\n                //检索成功的回调函数\n                complete: function(results) {\n                    //设置回调函数参数\n                    var pois = results.detail.pois;\n                    var infoWin = new qq.maps.InfoWindow({\n                        map: map\n                    });\n                    var latlngBounds = new qq.maps.LatLngBounds();\n                    for (var i = 0, l = pois.length; i < l; i++) {\n                        var poi = pois[i];\n                        //扩展边界范围，用来包含搜索到的Poi点\n                        latlngBounds.extend(poi.latLng);\n        \n                        (function(n) {\n                            var marker = new qq.maps.Marker({\n                                map: map\n                            });\n                            marker.setPosition(pois[n].latLng);\n        \n                            marker.setTitle(i + 1);\n                            that.markers.push(marker);\n                        })(i);\n                    }\n                //调整地图视野\n                    map.fitBounds(latlngBounds);\n                    },\n                    //若服务请求失败，则运行以下函数\n                    error: function() {\n                        alert(\"出错了。\");\n                    }\n            });\n            var param = Object()\n            param.id = this.$route.params.id\n            if(store.getters.token != undefined && store.getters.id != ''){\n                param.user_id = store.getters.id\n                save_history(param).then(res=>{\n\n                })\n            }\n            get_house_detail(param).then(res => {\n                this.result = res\n                this.images = res.pic\n                this.like = res.like\n                this.pic_length = res.pic.pic_length\n                searchService.setPageIndex(1);\n                //设置每页的结果数\n                searchService.setPageCapacity(1);\n                searchService.setLocation('上海');\n                searchService.search(res.district + res.address);\n            })\n            document.body.scrollTop = 0\n            document.documentElement.scrollTop = 0\n        });\n        },\n        onClickLeft(){\n            if(this.$route.params.type == 2){\n                this.$router.push({name:'secondary',params: { id: 2}})\n            }else{\n                this.$router.push({name:'list',params: { id: 1}})\n            }\n        },\n        onChange(index) {\n            this.current = index;\n        },\n        show_pic(index){\n            ImagePreview({\n                images: this.images,\n                startPosition: index,\n                onClose() {\n                    // do something\n                }\n            });\n        },\n        set_like(){\n            var that = this\n            var param = Object()\n            param.id = this.$route.params.id\n            if(store.getters.token != undefined && store.getters.id != ''){\n                param.user_id = store.getters.id\n                set_house_like(param).then(res => {\n                if(res.code == '2000'){\n                    this.like = res.data\n                }\n                })\n            }else{\n                this.msg = '请先登录'\n                this.show = true\n                setTimeout(function () {\n                    that.show = false\n                }, 1500)\n            }\n        },\n        add_appoint(){\n            if(store.getters.token != undefined && store.getters.id != ''){\n                this.appoint_area = true\n            }else{\n                this.msg = '请先登录'\n                this.show = true\n                setTimeout(function () {\n                    that.show = false\n                }, 1500)\n            }\n        },\n        beforeClose(action, done) {\n            var that = this\n            if (action === 'confirm') {\n                if(this.name == '' || this.phone == '' || this.appoint_time == ''){\n                this.msg = '填写完整'\n                this.show = true\n                setTimeout(function () {\n                    that.show = false\n                    done()\n                    that.appoint_area = true\n                }, 1500)                    \n                }else{\n                    var param = Object()\n                    param.user_id = store.getters.id,\n                    param.house_id = this.$route.params.id\n                    param.name = this.name\n                    param.phone = this.phone\n                    param.appoint_time = this.appoint_time\n                    set_appoint(param).then(res=>{\n                        this.msg = res.data\n                        this.show = true\n                        setTimeout(function () {\n                            that.show = false\n                            done()\n                        }, 1500)\n                    })\n                }\n            } else {\n                done();\n            }\n        },\n        call_phone(){\n\n        },\n        show_time(){\n            this.time_show = true\n        },\n        onConfirm(value){\n            this.appoint_time = formatDate(value, 'yyyy-MM-dd');\n            this.time_show = false\n        },\n        onCancel(){\n            this.time_show = false\n        },\n        show_all(){\n            if(this.traffic == 0){\n                this.traffic = 1\n                this.traffic_word = '展开'\n            }else{\n                this.traffic = 0\n                this.traffic_word = '关闭'\n            }\n        }\n    }\n}\n</script>\n\n<style scoped>\n.page{\n    width:100%;\n    height:auto;\n    padding-bottom:150px;\n}\n.swipe{\n    width:100%;\n    height:260px;\n}\n.lazy_img{\n    width:100%;\n    height:100%;\n}\n#container{\n    width:100%;\n    height:200px;\n    top:-7%;\n}\n.title{\n    width:85%;\n    height:60px;\n    font-family: PingFangMedium;\n    font-size:20px;\n    margin:0 auto;\n    line-height:60px;\n}\n.house_area{\n    width:90%;\n    height:auto;\n    padding-bottom:20px;\n    margin:0 auto;\n}\n.house_title{\n    width:100%;\n    height:70px;\n    padding-top:20px;\n    padding-bottom:20px;\n    font-size:18px;\n    font-family: PingFangBold;\n}\n.house_msg{\n    height:40px;\n}\n.msg_top{\n    width:100%;\n    height:20px;\n    text-align: center;\n    font-family: PingFangLight;\n    font-size:13px;\n}\n.msg_content{\n    width:100%;\n    height:20px;\n    text-align: center;\n    font-family: PingFangMedium;\n    color:#EA8608;\n}\n.msg_middle{\n    border-left: 1px solid #c2c2c2;\n    border-right: 1px solid #c2c2c2;\n}\n.house_announce{\n    width:100%;\n    height:200px;\n}\n.key_word{\n    width:100%;\n    height:50px;\n    margin-top:30px;\n    overflow: hidden;\n}\n.house_announce_detail{\n    width:100%;\n    height:150px;\n}\n.house_announce_detail .list{\n    height:40px;\n}\n.house_more{\n    width:90%;\n    margin:0 auto;\n}\n.facilities{\n    height:140px;\n}\n.list{\n    height:70px;\n}\n.van-tabbar-item{\n    height:70px;\n    font-size:14px;\n}\n.van-tabbar-item img{\n    width:40px;\n    height:40px;\n}\n.traffic{\n    margin-top:20px;\n    width:100%;\n    height:80px;\n    overflow: hidden;\n    font-size: 14px;\n    font-family: PingFangLight;\n}\n.traffic1{\n    margin-top:20px;\n    width:100%;\n    height:auto;\n    font-size: 14px;\n    font-family: PingFangLight;\n}\n.bottom{\n    width:100%;\n    height:50px;\n    position:fixed;\n    bottom:50px;\n    box-shadow: -8px 0px 9px 0px rgba(119,118,118,0.33);\n    background-color: #FFFFFF;\n}\n.van-button{\n    width:40%;\n    height:50px;\n}\n.bottom_left{\n    width:20%;\n    height:45px;\n    float:left;\n    padding-top:5px;\n    text-align: center;\n}\n.msg{\n    width:200px;\n    height:60px;\n    text-align:center;\n    line-height:60px;\n    border-radius: 5px;\n    font-family: PingFangBold;\n    color:#ffffff;\n    font-size:15px;\n    background-color: #000000;\n    box-shadow: 3px 4px 10px 2px rgba(119,118,118,0.33);\n}\n.msg .van-icon{\n    vertical-align: middle;\n    padding-right:5px;\n}\n.traffic_list{\n    margin-bottom: 20px;\n}\n</style>\n\n\n"],"sourceRoot":"src/views/detailpage"}]}