{"remainingRequest":"/Library/WebServer/Documents/runju2.0/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/runju2.0/src/views/users/edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/runju2.0/src/views/users/edit.vue","mtime":1543887793893},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { NavBar, CellGroup, Field,Button,Uploader} from 'vant'\nimport { set_newname,set_newpsd } from '@/api/user.js'\nimport { upload_pic } from '@/api/upload.js'\nimport Bottom from '../../components/Bottom.vue'\nimport store from '@/store'\nexport default {\n    data(){\n        return{\n            Aventer:'',\n            username: '',\n            phone:'',\n            show: 0,\n            new_name:'',\n            old_psd:'',\n            new_psd: '',\n            portrait: ''\n        }\n    },\n    components:{\n        Bottom,\n        [NavBar.name]:NavBar,\n        [CellGroup.name]:CellGroup,\n        [Field.name]:Field,\n        [Button.name]:Button,\n        [Uploader.name]:Uploader\n    },\n    created(){\n        this.fetchData()\n    },\n    methods:{\n        fetchData(){\n            var that = this\n            this.$store.dispatch('GetInfo').then(res => {\n                console.log(res)\n                that.username = res.data.name\n                that.phone = res.data.phone\n                that.portrait = res.data.portrait == '' ? require('../../img/head_default.png'): res.data.portrait\n            }).catch(() => {\n\n            })\n        },\n        onClickLeft(){\n            if(this.show == 0){\n                this.$router.push({path: '/user'})\n            }else if(this.show == 1 || this.show == 2){\n                this.show = 0\n            }\n        },\n        set_username(){\n            this.show = 1\n        },\n        send_newname(){\n            var param = Object()\n            param.id = store.getters.id\n            param.username = this.new_name\n            set_newname(param).then(res=>{\n                this.show = 0\n                this.fetchData()\n            })\n        },\n        set_password(){\n            this.show = 2\n        },\n        send_newpsd(){\n            var param = Object()\n            param.id = store.getters.id\n            param.password = this.old_psd\n            param.new_psd = this.new_psd\n            set_newpsd(param).then(res=>{\n                this.show = 0\n            })            \n        },\n        onRead(file) {\n            var param = Object()\n            param.file = file.content\n            upload_pic(param).then(res=>{\n\n            })\n            console.log(file);\n            //将原图片显示为选择的图片\n            this.portrait = file.content;\n        }\n    }\n}\n",{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit.vue","sourceRoot":"src/views/users","sourcesContent":["<template>\n    <div class='page'>\n        <van-nav-bar\n        title=\"我的个人信息\"\n        left-text=\"返回\"\n        right-text=\"\"\n        left-arrow\n        @click-left=\"onClickLeft\"\n        />\n        <van-cell-group v-if='show == 0'>\n            <div class='list_portrait'>\n                <div class='list_left'>头像</div>\n                <div class='list_right'>\n                    <van-uploader :after-read=\"onRead\" accept=\"image/*\" multiple>\n                        <img class=\"head-img\" :src=\"portrait\" ref=\"goodsImg\"/>\n                    </van-uploader>\n                </div>\n            </div>\n            <van-field input-align=\"right\" v-model=\"username\" label=\"昵称\"  readonly @click='set_username'/>\n            <van-field input-align=\"right\" v-model=\"phone\" label=\"手机号\" readonly />\n            <van-field input-align=\"right\" label=\"密码\" placeholder=\"设置密码\" @click='set_password'/>\n        </van-cell-group>\n        <div class='set_username' v-if='show == 1'>\n            <van-field label=\"昵称\" placeholder=\"输入昵称\" v-model='new_name'/>\n            <van-button class='sure' @click='send_newname'>确认</van-button>\n        </div>\n        <div class='set_userpsd' v-if='show == 2'>\n            <van-field label=\"旧密码\" type='password' placeholder=\"输入旧密码\" v-model='old_psd'/>\n            <van-field label=\"新密码\" type='password' placeholder=\"输入新密码\" v-model='new_psd'/>\n            <van-button class='sure' @click='send_newpsd'>确认</van-button>\n        </div>\n        <bottom></bottom>\n    </div>\n</template>\n\n<script>\nimport { NavBar, CellGroup, Field,Button,Uploader} from 'vant'\nimport { set_newname,set_newpsd } from '@/api/user.js'\nimport { upload_pic } from '@/api/upload.js'\nimport Bottom from '../../components/Bottom.vue'\nimport store from '@/store'\nexport default {\n    data(){\n        return{\n            Aventer:'',\n            username: '',\n            phone:'',\n            show: 0,\n            new_name:'',\n            old_psd:'',\n            new_psd: '',\n            portrait: ''\n        }\n    },\n    components:{\n        Bottom,\n        [NavBar.name]:NavBar,\n        [CellGroup.name]:CellGroup,\n        [Field.name]:Field,\n        [Button.name]:Button,\n        [Uploader.name]:Uploader\n    },\n    created(){\n        this.fetchData()\n    },\n    methods:{\n        fetchData(){\n            var that = this\n            this.$store.dispatch('GetInfo').then(res => {\n                console.log(res)\n                that.username = res.data.name\n                that.phone = res.data.phone\n                that.portrait = res.data.portrait == '' ? require('../../img/head_default.png'): res.data.portrait\n            }).catch(() => {\n\n            })\n        },\n        onClickLeft(){\n            if(this.show == 0){\n                this.$router.push({path: '/user'})\n            }else if(this.show == 1 || this.show == 2){\n                this.show = 0\n            }\n        },\n        set_username(){\n            this.show = 1\n        },\n        send_newname(){\n            var param = Object()\n            param.id = store.getters.id\n            param.username = this.new_name\n            set_newname(param).then(res=>{\n                this.show = 0\n                this.fetchData()\n            })\n        },\n        set_password(){\n            this.show = 2\n        },\n        send_newpsd(){\n            var param = Object()\n            param.id = store.getters.id\n            param.password = this.old_psd\n            param.new_psd = this.new_psd\n            set_newpsd(param).then(res=>{\n                this.show = 0\n            })            \n        },\n        onRead(file) {\n            var param = Object()\n            param.file = file.content\n            upload_pic(param).then(res=>{\n\n            })\n            console.log(file);\n            //将原图片显示为选择的图片\n            this.portrait = file.content;\n        }\n    }\n}\n</script>\n\n<style scoped>\n.page{\n    width:100%;\n    height:100%;\n    background-color: rgb(245,245,245);\n}\n.sure{\n    width:90%;\n    height:55px;\n    margin:10px auto;\n    display: block;\n    color:#ffffff;\n    background-color: rgb(84,112,224);\n    font-family: PingFangLight;\n    font-size:22px;\n    letter-spacing: 5px;\n}\n.van-cell-group{\n    margin-top:20px;\n    background-color: #ffffff;\n}\n.set_username,.set_userpsd{\n    margin-top:20px;\n}\n.list_portrait{\n    width:100%;\n    height:40px;\n}\n.list_left{\n    width: 25%;\n    height: 40px;\n    margin-left: 4%;\n    line-height: 40px;\n    color: #333;\n    font-size: 14px;\n    float:left;\n}\n.list_right{\n    width: 11%;\n    height: 40px;\n    margin-right: 4%;\n    float:right;\n    border-radius: 10px;\n}\n.van-uploader{\n    width:100%;\n    height:100%;    \n}\n.van-uploader img{\n    width:100%;\n    height:100%;\n}\n</style>\n"]}]}