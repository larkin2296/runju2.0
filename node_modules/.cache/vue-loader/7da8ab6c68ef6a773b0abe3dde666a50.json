{"remainingRequest":"/Library/WebServer/Documents/runju2.0/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/runju2.0/src/views/secondary/index.vue?vue&type=style&index=0&id=0892f5cd&scoped=true&lang=css&","dependencies":[{"path":"/Library/WebServer/Documents/runju2.0/src/views/secondary/index.vue","mtime":1543905295756},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.page{\n    width:100%;\n    height:100%;\n    background-color: rgb(242,242,242);\n}\n.banner_pic{\n    width:100%;\n    height:150px;\n    background-color: red;\n}\n.banner_pic img{\n    width:100%;\n    height:100%;\n}\n.search{\n    width:100%;\n    height:50px;\n}\n.chose_area{\n    width:100%;\n    height:30px;\n    line-height:30px;\n    font-family: PingFangLight;\n    font-size:12px;\n    text-align: center;\n    margin-bottom:5px;\n    background-color: #ffffff;\n}\n.chose_area div{\n    overflow: hidden;\n}\n.house_list{\n    width:100%;\n    min-height:55%;\n    background-color: #ffffff;\n    padding-bottom:50px;\n}\n.house{\n    width:100%;\n    height:120px;\n    background-color: #ffffff;\n}\n.house_detail{\n    width:90%;\n    margin:0 auto;\n    height:120px;\n    border-bottom: 1px solid rgb(172,172,172);\n}\n.swipe_left{\n    width: 30%;\n    height: 77%;\n    float: left;\n    margin-top: 2%;\n    border-radius: 10px;\n}\n.swipe_left img{\n  width:100%;\n  height:100%;\n  border-radius: 10px;\n}\n.swipe_right{\n  width:63%;\n  height:99%;\n  float:left;\n  margin-left:3%;\n}\n.swipe_right_top,.swipe_right_price{\n  width:100%;\n  height:25%;\n  line-height:30px;\n  font-family: PingFangLight;\n  font-size:16px;\n  color:#EA8608;\n}\n.swipe_right_center,.swipe_right_middle,.swipe_right_bottom{\n  width:100%;\n  height:16%;\n  line-height:19.2px;\n  font-family: PingFangLight;\n  font-size:13px;\n  color:rgb(172,172,172);\n  overflow: hidden;\n}\n.van-notice-bar{\n  height:30px;\n}\n.van-picker{\n    position: fixed;\n    z-index: 999;\n    width: 100%;\n    height: 300px;\n    bottom: 48px;\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/secondary","sourcesContent":["<template>\n    <div class='page'>\n        <van-nav-bar\n        title=\"房屋列表\"\n        left-text=\"返回\"\n        right-text=\"\"\n        left-arrow\n        @click-left=\"onClickLeft\"\n        />\n        <!-- banner图片 -->\n        <div class='banner_pic'>\n            <img src='../../img/timg.png' />\n        </div>\n        <!-- 搜索框 -->\n        <van-search class='search' style='background-color:rgb(0, 158, 251, 0.34);'\n        v-model=\"search\"\n        placeholder=\"请输入搜索关键词\"\n        show-action\n        @search=\"onSearch\"\n        >\n        <div slot=\"action\" @click=\"onSearch\">搜索</div>\n        </van-search>\n        <!-- 筛选 -->\n        <van-row class='chose_area' type=\"flex\">\n        <van-col span=\"6\" ><div @click='show_area'>{{area_data}}</div></van-col>\n        <van-col span=\"6\" ><div @click='show_huxing'>{{huxing_data}}</div></van-col>\n        <van-col span=\"6\" ><div @click='show_price'>{{price_data}}</div></van-col>\n        <van-col span=\"6\" ><div @click='show_choose'>{{choose_more}}</div></van-col>\n        </van-row>\n        <van-picker v-show='picker' show-toolbar\n        title=\"\"\n        :columns=\"columns\"\n        @cancel=\"onCancel\"\n        @confirm=\"onConfirm\" @change=\"onChange\" />\n        <!-- 列表 -->\n        <van-list  class='house_list' v-model=\"loading\" :finished=\"finished\" :offset='400' @load=\"onLoad\">\n        <div v-for=\"(item,index) in list\" :key=\"index\" class='house' @click=\"goDetail(item.id)\">\n            <div class='house_detail'>\n                <div class='swipe_left'><img :src=\"item.pic_1\" /></div>\n                <div class='swipe_right'>\n                <div class='swipe_right_top'><van-notice-bar :text=\"item.title\" background='#ffffff'/></div>\n                <div class='swipe_right_center'>{{item.door_name}} 大一居大床外景</div>\n                <div class='swipe_right_middle'>{{item.address}}</div>\n                <div class='swipe_right_bottom'>\n                    <child v-for=\"(itemchild,index) in item.key_name\" :key=\"index\" :message=\"itemchild\"></child>\n                </div>\n                <div class='swipe_right_price'>{{item.price}}万元</div>\n                </div>\n            </div>\n        </div>\n        </van-list>\n        <bottom></bottom>\n    </div>\n</template>\n\n<script>\nimport { NavBar,List,Cell,Row, Col,Search,NoticeBar,Picker } from 'vant';\nimport { search_house , get_choose_data } from '@/api/house.js'\nimport Bottom from '../../components/Bottom.vue'\nimport Child from '../../components/Keyword.vue'\nexport default {\n    data() {\n        return{\n            id: this.$route.params.id,\n            list: [],\n            loading: false,\n            finished: false,\n            type: 2,\n            columns: [],\n            area: {},\n            huxing: {},\n            price: {},\n            picker:false,\n            search: '',\n            area_data: '区域',\n            huxing_data: '户型',\n            price_data: '价格',\n            choose: 0,\n            choose_more: '更多',\n            keyword: {}\n        }\n    },\n    components: {\n        Bottom,\n        Child,\n        [NavBar.name]:NavBar,\n        [List.name]:List,\n        [Cell.name]:Cell,\n        [Row.name]:Row,\n        [Col.name]:Col,\n        [Search.name]:Search,\n        [NoticeBar.name]: NoticeBar,\n        [Picker.name]:Picker\n    },\n    created() {\n        this.fetchData()\n    },\n    methods:{\n        fetchData(){\n            if(this.$route.params.search != ''){\n                this.search = this.$route.params.search\n            }\n            get_choose_data().then(res=>{\n                this.area = res.area\n                this.huxing = res.huxing\n                this.price = res.secondary\n                this.keyword = res.keyword\n            })\n        },\n        onClickLeft(){\n            this.$router.push({path: '/'})\n        },\n        onChange(picker, values) {\n            //console.log(this.citys[values[0]][values[1]]);\n            // console.log(this.citys['地铁']['2号线'])\n            var data = this.area[values[0]][values[1]]\n            if(this.area[values[0]][values[1]] == undefined){\n                var arr = Object.keys(this.area[values[0]])\n                data = this.area[values[0]][arr[0]]\n            }\n            // console.log(arr[0])\n            picker.setColumnValues(1, Object.keys(this.area[values[0]]));\n            picker.setColumnValues(2, data);\n        },\n        onLoad() {\n            // 异步更新数据\n            setTimeout(() => {\n                var param = Object()\n                if(this.search != ''){\n                    param.title = this.search\n                }\n                if(this.area_data != '区域'){\n                    param.area = this.area_data\n                }\n                if(this.huxing_data != '户型'){\n                    param.huxing = this.huxing_data\n                }\n                if(this.price_data != '价格'){\n                    param.secondary = this.price_data\n                }\n                if(this.choose_more != '更多'){\n                    param.keyword = this.choose_more\n                }\n                param.num = ((this.list.length - 1) < 0 ? 0 : (this.list.length))\n                param.rent_type = this.$route.params.id\n                this.type = this.$route.params.id\n                var that = this\n                search_house(param).then(res => {\n                    res.data.forEach(function (c) {\n                        that.list.push(c);\n                    })\n                    this.loading = false\n                    if(res.code == 'none'){\n                        this.finished = true\n                    }\n                })\n            }, 500);\n//             var area = {\n//   '地铁': {'1号线':['人民广场','上海火车站'], '2号线':['陆家嘴','东昌路']},\n//   '地区': {'黄浦':['南京东路','周家嘴'], '浦东':['世纪大道','张江']}\n// }\n                // 加载状态结束\n                \n\n                // 数据全部加载完成\n                \n        },\n        goDetail(id){\n            this.$router.push({name:'detail',params: { id: id,type: 2 }})\n        },\n        show_area(){\n            this.choose = 0\n            this.picker = true\n            var first = new Array()\n            first = Object.keys(this.area)\n            var sec = new Array()\n            sec = Object.keys(this.area[first[0]])\n            this.columns = [{\n                values: Object.keys(this.area),\n                className: 'column1'\n                },\n                {\n                values: Object.keys(this.area[first[0]]),\n                className: 'column2',\n                defaultIndex: 0\n                },\n                {\n                values: this.area[first[0]][sec[0]],\n                className: 'column3',\n                defaultIndex: 0\n                },\n            ] \n        },\n        onSearch(){\n            this.list = []\n            this.loading = true\n            this.onLoad()          \n        },\n        show_huxing(){\n            this.choose = 1\n            this.picker = true\n            var huxing = this.huxing\n            this.columns = [{\n                values: huxing,\n                className: 'column1'\n                },\n            ] \n        },\n        show_price(){\n            this.choose = 2\n            this.picker = true\n            var price = this.price\n            this.columns = [{\n                values: price,\n                className: 'column1'\n                },\n            ] \n        },\n        show_choose(){\n            this.choose = 3\n            this.picker = true\n            var keyword = this.keyword\n            this.columns = [{\n                values: keyword,\n                className: 'column1'\n                },\n            ]\n        },\n        onConfirm(value, index) {\n            switch(this.choose){\n                case 0:\n                    this.area_data = value[1] == '不限' ? '区域' : (value[2] == '不限' ? value[1] : value[2])\n                    break;\n                case 1:\n                    this.huxing_data = `${value}` == '不限' ? '户型' : `${value}`\n                    break;\n                case 2:\n                    this.price_data = `${value}` == '不限' ? '价格' : `${value}`\n                case 2:\n                    this.choose_more = `${value}` == '不限' ? '更多' : `${value}`\n            }\n            this.list = []\n            this.loading = true\n            this.onLoad()\n            this.picker = false\n        },\n        onCancel() {\n            this.picker = false\n        },\n        set_colums(data){\n\n        }\n    },\n}\n</script>\n\n<style scoped>\n.page{\n    width:100%;\n    height:100%;\n    background-color: rgb(242,242,242);\n}\n.banner_pic{\n    width:100%;\n    height:150px;\n    background-color: red;\n}\n.banner_pic img{\n    width:100%;\n    height:100%;\n}\n.search{\n    width:100%;\n    height:50px;\n}\n.chose_area{\n    width:100%;\n    height:30px;\n    line-height:30px;\n    font-family: PingFangLight;\n    font-size:12px;\n    text-align: center;\n    margin-bottom:5px;\n    background-color: #ffffff;\n}\n.chose_area div{\n    overflow: hidden;\n}\n.house_list{\n    width:100%;\n    min-height:55%;\n    background-color: #ffffff;\n    padding-bottom:50px;\n}\n.house{\n    width:100%;\n    height:120px;\n    background-color: #ffffff;\n}\n.house_detail{\n    width:90%;\n    margin:0 auto;\n    height:120px;\n    border-bottom: 1px solid rgb(172,172,172);\n}\n.swipe_left{\n    width: 30%;\n    height: 77%;\n    float: left;\n    margin-top: 2%;\n    border-radius: 10px;\n}\n.swipe_left img{\n  width:100%;\n  height:100%;\n  border-radius: 10px;\n}\n.swipe_right{\n  width:63%;\n  height:99%;\n  float:left;\n  margin-left:3%;\n}\n.swipe_right_top,.swipe_right_price{\n  width:100%;\n  height:25%;\n  line-height:30px;\n  font-family: PingFangLight;\n  font-size:16px;\n  color:#EA8608;\n}\n.swipe_right_center,.swipe_right_middle,.swipe_right_bottom{\n  width:100%;\n  height:16%;\n  line-height:19.2px;\n  font-family: PingFangLight;\n  font-size:13px;\n  color:rgb(172,172,172);\n  overflow: hidden;\n}\n.van-notice-bar{\n  height:30px;\n}\n.van-picker{\n    position: fixed;\n    z-index: 999;\n    width: 100%;\n    height: 300px;\n    bottom: 48px;\n}\n</style>\n"]}]}