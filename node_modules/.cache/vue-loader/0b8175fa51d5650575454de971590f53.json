{"remainingRequest":"/Library/WebServer/Documents/runju2.0/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/runju2.0/src/views/maintenance/index.vue?vue&type=style&index=0&id=4fdca52c&scoped=true&lang=css&","dependencies":[{"path":"/Library/WebServer/Documents/runju2.0/src/views/maintenance/index.vue","mtime":1543907580924},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#page{\n    width:100%;\n    height:100%;\n    background-color: rgb(242,242,242);\n}\n.area{\n    width:100%;\n    height:300px;\n    background-color: #ffffff;\n}\n.text{\n    width:90%;\n    margin-left:5%;\n    height:200px;\n    font-size:14px;\n}\n.upload{\n    width:90%;\n    height:100px;\n    margin:0 auto;\n}\n.sure{\n    width:90%;\n    height:50px;\n    margin:10px auto;\n    display: block;\n    color:#ffffff;\n    background-color: #EA8608;\n    font-family: PingFangLight;\n    font-size:22px;\n    letter-spacing: 5px;\n}\n.upload img{\n    width:80px;\n    height:80px;\n    margin-right:10px;\n}\n.msg{\n    width:200px;\n    height:60px;\n    text-align:center;\n    line-height:60px;\n    border-radius: 5px;\n    font-family: PingFangBold;\n    color:#ffffff;\n    font-size:15px;\n    background-color: #000000;\n    box-shadow: 3px 4px 10px 2px rgba(119,118,118,0.33);\n}\n.van-icon{\n    vertical-align: middle;\n    padding-right:5px;\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/maintenance","sourcesContent":["<template>\n    <div id='page'>\n        <van-nav-bar\n        :title=\"title\"\n        left-text=\"返回\"\n        right-text=\"\"\n        left-arrow\n        @click-left=\"onClickLeft\"\n        />\n        <van-popup class='msg' v-model=\"show\" :overlay=\"false\"><van-icon name='question'/>{{msg}}</van-popup>\n         <div class='area'>\n            <textarea class='text' v-model='content' placeholder=\"请填写你遇到的问题给我们\"></textarea>\n            <div class='upload'>\n                <img v-for=\"(item,index) in img_list\" :key=\"index\" :src='item.url'/>\n                <van-uploader :after-read=\"onRead\" accept=\"image/*\" multiple>\n                    <img class=\"head-img\" :src=\"portrait\" ref=\"goodsImg\"/>\n                </van-uploader>\n            </div>\n        </div>\n        <van-button class='sure' @click='send_maintenance'>确认</van-button>\n    </div>\n</template>\n<script>\nimport { Uploader,Button,NavBar,Popup,Icon } from 'vant'\nimport { send_maintencance_data } from '@/api/upload.js'\nexport default {\n    data(){\n        return{\n            img_list: [],\n            portrait: require('../../img/add_pic.png'),\n            type: this.$route.params.id,\n            title: '',\n            msg: '',\n            content: ''\n        }\n    },\n    created(){\n        this.fetchData()\n    },\n    components:{\n        [Uploader.name]:Uploader,\n        [Button.name]:Button,\n        [NavBar.name]:NavBar,\n        [Popup.name]:Popup,\n        [Icon.name]:Icon\n    },\n    methods:{\n        fetchData(){\n            if(this.$route.params.id == 0){\n                this.title = '房屋维修'\n            }else{\n                this.title = '意见反馈'\n            }\n        },\n        onClickLeft(){\n            this.$router.push({path: '/user'})\n        },\n        onRead(file){\n            if(this.img_list.length > 3){\n                this.msg = '最多上传三张图片'\n                this.show = true\n                setTimeout(function () {\n                    that.show = false\n                }, 1500)\n            }\n            var param = Object()\n            param.url = file.content\n            this.img_list.push(param)\n        },\n        send_maintenance(){\n            var param = Object()\n            if(this.content == ''){\n                this.msg = '请输入反馈问题'\n                this.show = true\n                setTimeout(function () {\n                    that.show = false\n                }, 1500)\n            }else{\n                param.content = this.content\n                param.img_list = this.img_list\n                param.type = this.type\n                send_maintencance_data(param).then(res=>{\n                    this.msg = '最多上传三张图片'\n                    this.show = true\n                    setTimeout(function () {\n                        that.show = false\n                    }, 1500)\n                    this.img_list = []\n                    this.content = ''                    \n                })\n            }\n        }\n    }\n}\n</script>\n\n<style scoped>\n#page{\n    width:100%;\n    height:100%;\n    background-color: rgb(242,242,242);\n}\n.area{\n    width:100%;\n    height:300px;\n    background-color: #ffffff;\n}\n.text{\n    width:90%;\n    margin-left:5%;\n    height:200px;\n    font-size:14px;\n}\n.upload{\n    width:90%;\n    height:100px;\n    margin:0 auto;\n}\n.sure{\n    width:90%;\n    height:50px;\n    margin:10px auto;\n    display: block;\n    color:#ffffff;\n    background-color: #EA8608;\n    font-family: PingFangLight;\n    font-size:22px;\n    letter-spacing: 5px;\n}\n.upload img{\n    width:80px;\n    height:80px;\n    margin-right:10px;\n}\n.msg{\n    width:200px;\n    height:60px;\n    text-align:center;\n    line-height:60px;\n    border-radius: 5px;\n    font-family: PingFangBold;\n    color:#ffffff;\n    font-size:15px;\n    background-color: #000000;\n    box-shadow: 3px 4px 10px 2px rgba(119,118,118,0.33);\n}\n.van-icon{\n    vertical-align: middle;\n    padding-right:5px;\n}\n</style>\n"]}]}