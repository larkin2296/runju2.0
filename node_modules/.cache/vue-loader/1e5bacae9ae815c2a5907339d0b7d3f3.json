{"remainingRequest":"/Library/WebServer/Documents/runju2.0/node_modules/vue-loader/lib/index.js??vue-loader-options!/Library/WebServer/Documents/runju2.0/src/views/appointpage/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Library/WebServer/Documents/runju2.0/src/views/appointpage/index.vue","mtime":1543724599569},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Library/WebServer/Documents/runju2.0/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { NavBar,Button,List,NoticeBar,SwipeCell,Icon,Popup,Dialog } from 'vant'\nimport Bottom from '../../components/Bottom.vue'\nimport Child from '../../components/Keyword.vue'\nimport { get_appoint_data,delete_appoint } from '@/api/appoint.js'\nimport store from '@/store'\nexport default {\n    data(){\n        return{\n            label: 0,\n            list:[],\n            loading:false,\n            finished:false,\n            show:false,\n            msg: ''\n        }\n    },\n    components: {\n        Bottom,\n        Child,\n        [NavBar.name]: NavBar,\n        [Button.name]: Button,\n        [List.name]:List,\n        [NoticeBar.name]:NoticeBar,\n        [SwipeCell.name]:SwipeCell,\n        [Icon.name]:Icon,\n        [Popup.name]:Popup,\n        [Dialog.name]:Dialog\n    },\n    created(){\n        this.fetchData()\n    },\n    methods: {\n        fetchData(){\n            var that = this\n            if(store.getters.token != undefined && store.getters.id != ''){\n                var param = Object()\n                param.user_id = store.getters.id\n                get_appoint_data(param).then(res=>{\n                    if(res.code == '2000'){\n                        this.label = res.status\n                    }else{\n                        this.label = res.status\n                    }\n                })\n            }\n        },\n        onLoad(){\n            var that = this\n            if(store.getters.token != undefined && store.getters.id != ''){\n                var param = Object()\n                param.user_id = store.getters.id\n                get_appoint_data(param).then(res=>{\n                    if(res.code == '2000'){\n                        this.list = res.house\n                        this.loading = false\n                        this.finished = true\n                    }else{\n                        that.label = res.status\n                    }\n                })\n            }else{\n                this.list = [];\n            }\n            if(this.list == []){\n                this.label = 0\n            }\n        },\n        onClose(clickPosition, instance) {\n            switch (clickPosition) {\n                case 'left':\n                case 'cell':\n                case 'outside':\n                instance.close();\n                break;\n                case 'right':\n                Dialog.confirm({\n                    message: '确定删除吗？'\n                }).then(() => {\n                    var that = this\n                    var param = Object()\n                    param.id = instance.$attrs.data\n                    delete_appoint(param).then(res=>{\n                        this.msg = res.msg\n                        this.show = true\n                        setTimeout(function () {\n                            that.show = false\n                            that.onLoad()\n                            instance.close();\n                        }, 1500)\n                    })\n                    \n                });\n                break;\n            }\n        }\n    }\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/appointpage","sourcesContent":["<template>\n    <div>\n        <van-nav-bar\n        title=\"行程列表\"\n        left-text=\"\"\n        right-text=\"\"\n        />\n        <van-popup class='msg' v-model=\"show\" :overlay=\"false\"><van-icon name='question'/>{{msg}}</van-popup>\n        <!-- 没有行程 -->\n        <div class='empty' v-if=\"label == 0\">\n            <div class='img'>\n                <img src='../../img/announcement.png' />\n            </div>\n            <div class='empty_title'>\n                抱歉，你还没有添加任何行程\n            </div>\n        </div>\n        <!-- 行程列表 -->\n        <div class='list' v-if=\"label == 1\">\n            <div class='title'>整租/合租</div>\n            <div class='title_bottom'></div>\n            <van-list  class='house_list' v-model=\"loading\" :finished=\"finished\" :offset='400' @load='onLoad'>\n                <div v-for=\"(item,index) in list\" :key=\"index\" class='house' @click=\"goDetail(item.id)\">\n                    <div class='appoint_time'>{{item.appoint_time}}</div>\n                    <van-swipe-cell :right-width=\"55\" :left-width=\"55\" v-bind:data='item.id' :on-close=\"onClose\">\n                        <div class='swipe_left'><img :src=\"item.house.pic_1\" /></div>\n                        <div class='swipe_right'>\n                        <div class='swipe_right_top'><van-notice-bar :text=\"item.house.title\" background='#ffffff'/></div>\n                        <div class='swipe_right_center'>{{item.house.door_name}} 大一居大床外景</div>\n                        <div class='swipe_right_middle'>{{item.house.address}}</div>\n                        <div class='swipe_right_bottom'>\n                            <child v-for=\"(itemchild,index) in item.house.key_name\" :key=\"index\" :message=\"itemchild\"></child>\n                        </div>\n                        <div class='swipe_right_price'>{{item.house.price}}元/月</div>\n                        </div>\n                        <span slot=\"right\">删除</span>\n                    </van-swipe-cell>\n                </div>\n            </van-list>\n        </div>\n        <bottom></bottom>\n    </div>\n</template>\n\n<script>\nimport { NavBar,Button,List,NoticeBar,SwipeCell,Icon,Popup,Dialog } from 'vant'\nimport Bottom from '../../components/Bottom.vue'\nimport Child from '../../components/Keyword.vue'\nimport { get_appoint_data,delete_appoint } from '@/api/appoint.js'\nimport store from '@/store'\nexport default {\n    data(){\n        return{\n            label: 0,\n            list:[],\n            loading:false,\n            finished:false,\n            show:false,\n            msg: ''\n        }\n    },\n    components: {\n        Bottom,\n        Child,\n        [NavBar.name]: NavBar,\n        [Button.name]: Button,\n        [List.name]:List,\n        [NoticeBar.name]:NoticeBar,\n        [SwipeCell.name]:SwipeCell,\n        [Icon.name]:Icon,\n        [Popup.name]:Popup,\n        [Dialog.name]:Dialog\n    },\n    created(){\n        this.fetchData()\n    },\n    methods: {\n        fetchData(){\n            var that = this\n            if(store.getters.token != undefined && store.getters.id != ''){\n                var param = Object()\n                param.user_id = store.getters.id\n                get_appoint_data(param).then(res=>{\n                    if(res.code == '2000'){\n                        this.label = res.status\n                    }else{\n                        this.label = res.status\n                    }\n                })\n            }\n        },\n        onLoad(){\n            var that = this\n            if(store.getters.token != undefined && store.getters.id != ''){\n                var param = Object()\n                param.user_id = store.getters.id\n                get_appoint_data(param).then(res=>{\n                    if(res.code == '2000'){\n                        this.list = res.house\n                        this.loading = false\n                        this.finished = true\n                    }else{\n                        that.label = res.status\n                    }\n                })\n            }else{\n                this.list = [];\n            }\n            if(this.list == []){\n                this.label = 0\n            }\n        },\n        onClose(clickPosition, instance) {\n            switch (clickPosition) {\n                case 'left':\n                case 'cell':\n                case 'outside':\n                instance.close();\n                break;\n                case 'right':\n                Dialog.confirm({\n                    message: '确定删除吗？'\n                }).then(() => {\n                    var that = this\n                    var param = Object()\n                    param.id = instance.$attrs.data\n                    delete_appoint(param).then(res=>{\n                        this.msg = res.msg\n                        this.show = true\n                        setTimeout(function () {\n                            that.show = false\n                            that.onLoad()\n                            instance.close();\n                        }, 1500)\n                    })\n                    \n                });\n                break;\n            }\n        }\n    }\n}\n</script>\n\n<style lang=\"less\">\n\n.empty{\n    width:200px;\n    height:100px;\n    margin:200px auto;\n}\n.img {\n    width:100px;\n    height:100px;\n    margin:0 auto;\n}\n.img img{\n    width:100%;\n    height:100%;\n}\n.empty_title{\n    font-family: PingFangBold;\n    font-size:14px;\n    text-align: center;\n}\n.empty_button{\n    width:80px;\n    height:80px;\n    margin: 0 auto;\n}\n.appoint_time{\n    width:90%;\n    margin:0 auto;\n    font-size:16px;\n    font-family: PingFangLight;\n    color:#EA8608;\n}\n.title{\n    width: 90%;\n    height: 40px;\n    margin: 0 auto;\n    font-size: 26px;\n    line-height: 40px;\n    font-family: PingFangBold;\n}\n.title_bottom{\n    width:60px;\n    height:5px;\n    border-radius: 2px;\n    background-color: #EA8608;\n    margin-left:5%;\n    margin-bottom: 20px;\n}\n  .van-swipe-cell {\n    width:90%;\n    margin:0 auto;\n    height:120px;\n    &__left,\n    &__right {\n      color: #ffffff;\n      font-size: 15px;\n      width: 55px;\n      height: 120px;\n      display: inline-block;\n      text-align: center;\n      line-height: 120px;\n      background-color: red;\n    }\n  }\n.swipe_left{\n    width: 120px;\n    height: 110px;\n    float: left;\n    margin-top: 2%;\n    border-radius: 10px;\n}\n.swipe_left img{\n  width:100%;\n  height:100%;\n  border-radius: 10px;\n}\n.swipe_right{\n  width:61%;\n  height:99%;\n  float:left;\n  margin-left:3%;\n}\n.swipe_right_top,.swipe_right_price{\n  width:100%;\n  height:25%;\n  line-height:30px;\n  font-family: PingFangLight;\n  font-size:16px;\n  color:#EA8608;\n}\n.swipe_right_center,.swipe_right_middle,.swipe_right_bottom{\n  width:100%;\n  height:16%;\n  line-height:19.2px;\n  font-family: PingFangLight;\n  font-size:13px;\n  color:rgb(172,172,172);\n  overflow: hidden;\n}\n.van-notice-bar{\n  height:30px;\n}\n.msg{\n    width:200px;\n    height:60px;\n    text-align:center;\n    line-height:60px;\n    border-radius: 5px;\n    font-family: PingFangBold;\n    color:#ffffff;\n    font-size:15px;\n    background-color: #000000;\n    box-shadow: 3px 4px 10px 2px rgba(119,118,118,0.33);\n}\n.van-icon{\n    vertical-align: middle;\n    padding-right:5px;\n}\n</style>\n"]}]}